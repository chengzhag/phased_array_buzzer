# phased_array_buzzer
蜂鸣器相控阵

## 硬件

- 运放
	- lm386
	- 滤波器输入阻抗1000欧级以上，减少单片机io功耗
	- 输入需要耦合
	- 由于增益范围是20~倍，所以输入滤波后的峰值应在200mVpp以下
	- 在100kHz，20倍增益下无明显失真
	- 输出通过接口与喇叭/蜂鸣器连接，两个口可选是否耦合
- 蜂鸣器
	- 输入信号可以带直偏
	- 科协的蜂鸣器最佳频率在2~4kHz
- pwm
	- pwm频率在保证占空比分辨率的条件下尽量高
	- 如果考虑8位占空比分辨率，则pwm频率最高可达200MHz/256（f7）或72MHz/256（f1）
	- 考虑f1可达到的最高pwm频率281kHz，则输出频率可达到50kHz
- 滤波器
	- 设计无源低通滤波器，滤除281kHz的pwm波，保留50kHz的音频
	- 增益：0.2/3.3=0.06以下，输出分压调整衰减倍数
- dma
	- pwm占空比的动态调节基于dma，操作频率能否达到281kHz？
	- 正弦波相位的调节基于对RAM中数组的更改
	- 一个pwm dac数组的大小？
- 阵列
	- 4~10个，频率2~4kHz赫兹
	- 间距最多340/4k/2=0.0425m
	- 长度0.0425*10=0.425m
	- 各蜂鸣器，运放，滤波器模块相互独立
	- 洞洞板验证~覆铜板腐蚀
	- 模块等距固定在碳纤杆上，碳纤杆可固定在桌面
- 清单：lm386，长排针，混合排针座（用于制作叠层模块），超声波喇叭，无源蜂鸣器，双绞线（或用现成的舵机线？）

## 软件
- 先实现方波驱动，dma + io翻转
	- 数组存储io口一个方波周期内的状态
	- 可以通过数组调整相位和占空比
	- dma以固定频率循环搬移数组控制io口电平
	- 蜂鸣器的相位和声量得以控制
